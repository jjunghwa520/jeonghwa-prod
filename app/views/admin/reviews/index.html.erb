<div class="container py-4">
  <h1 class="mb-3">리뷰 관리</h1>
  <form method="get" class="mb-3 d-flex gap-2">
    <input type="text" name="q" value="<%= params[:q] %>" class="form-control" placeholder="이름/이메일/코스 제목 검색" />
    <button class="btn btn-outline-secondary" type="submit">검색</button>
  </form>
  <table class="table table-striped">
    <thead>
      <tr><th>ID</th><th>코스</th><th>사용자</th><th>별점</th><th>내용</th><th>활성</th><th></th></tr>
    </thead>
    <tbody>
      <% @reviews.each do |r| %>
        <tr>
          <td><%= r.id %></td>
          <td><%= link_to r.course.title, course_path(r.course), target: '_blank' %></td>
          <td><%= r.user.name %> (<%= r.user.email %>)</td>
          <td><%= r.rating %></td>
          <td style="max-width: 400px;"><%= truncate(r.content, length: 120) %></td>
          <td>
            <%= form_with url: admin_review_path(r), method: :patch, class: 'd-inline' do %>
              <input type="hidden" name="active" value="<%= !r.active %>" />
              <button class="btn btn-sm <%= r.active ? 'btn-success' : 'btn-secondary' %>"><%= r.active ? '활성' : '비활성' %></button>
            <% end %>
          </td>
          <td>
            <%= button_to '삭제', admin_review_path(r), method: :delete, data: { confirm: '삭제하시겠습니까?' }, class: 'btn btn-sm btn-outline-danger' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>


