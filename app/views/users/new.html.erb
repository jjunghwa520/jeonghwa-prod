<% content_for :title, "íšŒì›ê°€ì… - ì •í™”ì˜ ì„œì¬" %>

<div class="modern-signup-container">
  <!-- ì—°ë ¹ëŒ€ ì„ íƒ ì„¹ì…˜ -->
  <div id="age-selection-section" class="age-selection-wrapper">
    <div class="signup-header">
      <div class="brand-logo">
        <i class="bi bi-book-half"></i>
        <span>ì •í™”ì˜ ì„œì¬</span>
      </div>
      <h1 class="signup-title">íšŒì›ê°€ì…</h1>
      <p class="signup-subtitle">ì–´ë–¤ ë¶„ì„ ìœ„í•œ ê³„ì •ì„ ë§Œë“œì‹œë‚˜ìš”?</p>
    </div>
    
    <div class="age-options">
      <!-- ì„±ì¸ ì„ íƒ ì˜µì…˜ -->
      <div class="age-option adult-option" data-age="adult">
        <div class="option-icon">
          <i class="bi bi-person-badge"></i>
        </div>
        <div class="option-content">
          <h3>ì„±ì¸ íšŒì›</h3>
          <p>18ì„¸ ì´ìƒ</p>
          <div class="option-features">
            <span>ì „ë¬¸ ê°•ì˜</span>
            <span>ë„ì„œ ëŒ€ì—¬</span>
            <span>ìˆ˜ë£Œì¦</span>
          </div>
        </div>
        <div class="option-arrow">
          <i class="bi bi-arrow-right"></i>
        </div>
      </div>
      
      <!-- í‚¤ì¦ˆ ì„ íƒ ì˜µì…˜ -->
      <div class="age-option kids-option" data-age="kids">
        <div class="option-icon">
          <i class="bi bi-emoji-smile"></i>
        </div>
        <div class="option-content">
          <h3>í‚¤ì¦ˆ íšŒì›</h3>
          <p>3-17ì„¸</p>
          <div class="option-features">
            <span>êµìœ¡ ê°•ì˜</span>
            <span>ë™í™”/ë§Œí™”</span>
            <span>ë¶€ëª¨ í†µì œ</span>
          </div>
        </div>
        <div class="option-arrow">
          <i class="bi bi-arrow-right"></i>
        </div>
      </div>
    </div>
  </div>
      
  <!-- íšŒì›ê°€ì… í¼ ì„¹ì…˜ -->
  <div id="signup-form-section" class="signup-form-wrapper" style="display: none;">
    <div class="form-container">
      <!-- í¼ í—¤ë” -->
      <div class="form-header">
        <button type="button" id="back-to-selection" class="back-button">
          <i class="bi bi-arrow-left"></i>
        </button>
        <div id="selected-age-indicator" class="age-indicator">
          <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>
          </div>

          <%= form_with model: @user, local: true, class: "needs-validation", novalidate: true do |f| %>
              <!-- ìˆ¨ê²¨ì§„ ì—°ë ¹ëŒ€ í•„ë“œ -->
              <%= f.hidden_field :age_category, id: "age_category_field" %>
              
            <% if @user.errors.any? %>
              <div class="alert alert-danger" role="alert">
                <h6>ë‹¤ìŒ ì˜¤ë¥˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”:</h6>
                <ul class="mb-0">
                  <% @user.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                  <% end %>
                </ul>
              </div>
            <% end %>

              <!-- í‚¤ì¦ˆ ì „ìš©: ë¶€ëª¨ë‹˜ ì •ë³´ ì„¹ì…˜ -->
              <div id="parent-info-section" style="display: none;">
                <div class="info-section-header">
                  <h5><i class="bi bi-person-hearts me-2"></i>ë¶€ëª¨ë‹˜ ì •ë³´</h5>
                  <p class="text-muted">ìë…€ì˜ ì•ˆì „í•œ í•™ìŠµê³¼ ë§ì¶¤ ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="form-grid">
                  <!-- ë¶€ëª¨ë‹˜ ê¸°ë³¸ ì •ë³´ -->
                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ë¶€ëª¨ë‹˜ ì„±í•¨</label>
                      <%= f.text_field :parent_name, class: "form-control", 
                                      placeholder: "ì„±í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”", id: "parent_name_field" %>
                    </div>
                    <div class="form-group">
                      <label class="form-label">ğŸ“§ ë¶€ëª¨ë‹˜ ì´ë©”ì¼</label>
                      <%= f.email_field :parent_email, class: "form-control", 
                                       placeholder: "ì´ë©”ì¼ ì£¼ì†Œ", id: "parent_email_field" %>
                    </div>
                  </div>
                  
                  <!-- ë¶€ëª¨ë‹˜ ì—°ë½ì²˜ ë° ìƒì¼ -->
                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">ğŸ“± ì—°ë½ì²˜</label>
                      <%= f.text_field :parent_phone, class: "form-control", 
                                      placeholder: "010-1234-5678", id: "parent_phone_field",
                                      type: "tel" %>
                    </div>
                    <div class="form-group">
                      <label class="form-label">ğŸ‚ ë¶€ëª¨ë‹˜ ìƒë…„ì›”ì¼</label>
                      <%= f.date_field :parent_birthday, class: "form-control", 
                                      id: "parent_birthday_field" %>
                    </div>
                  </div>
                  
                  <!-- ê´€ê³„ ë° ì§ì—… -->
                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">ğŸ‘¥ ìë…€ì™€ì˜ ê´€ê³„</label>
                      <%= f.select :parent_relationship, 
                                  options_for_select([
                                    ['ì•„ë²„ì§€', 'father'],
                                    ['ì–´ë¨¸ë‹ˆ', 'mother'],
                                    ['ì¡°ë¶€ëª¨', 'grandparent'],
                                    ['ê¸°íƒ€ ë³´í˜¸ì', 'guardian']
                                  ]), 
                                  { prompt: "ê´€ê³„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”" },
                                  { class: "form-select", id: "parent_relationship_field" } %>
                    </div>
                    <div class="form-group">
                      <label class="form-label">ğŸ’¼ ì§ì—… (ì„ íƒì‚¬í•­)</label>
                      <%= f.text_field :parent_job, class: "form-control", 
                                      placeholder: "ì˜ˆ: íšŒì‚¬ì›, ìì˜ì—… ë“±", id: "parent_job_field" %>
                    </div>
                  </div>
                </div>
              </div>

              <!-- í‚¤ì¦ˆ ì „ìš©: ìë…€ ì •ë³´ ì„¹ì…˜ -->
              <div id="child-info-section" style="display: none;">
                <div class="info-section-header">
                  <h5><i class="bi bi-emoji-smile me-2"></i>ìë…€ ì •ë³´</h5>
                  <p class="text-muted">ë§ì¶¤í˜• ì½˜í…ì¸  ì¶”ì²œê³¼ ìƒì¼ ì´ë²¤íŠ¸ ì•ˆë‚´ë¥¼ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.</p>
                </div>
                
                <div class="form-grid">
                  <!-- ìë…€ ê¸°ë³¸ ì •ë³´ -->
                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">ğŸ‘¶ ìë…€ ì´ë¦„</label>
                      <%= f.text_field :child_name, class: "form-control", 
                                      placeholder: "ìë…€ì˜ ì´ë¦„", id: "child_name_field" %>
                    </div>
                    <div class="form-group">
                      <label class="form-label">âš¥ ì„±ë³„</label>
                      <%= f.select :child_gender, 
                                  options_for_select([
                                    ['ë‚¨ìì•„ì´', 'male'],
                                    ['ì—¬ìì•„ì´', 'female']
                                  ]), 
                                  { prompt: "ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”" },
                                  { class: "form-select", id: "child_gender_field" } %>
                    </div>
                  </div>
                  
                  <!-- ìë…€ ìƒë…„ì›”ì¼ -->
                  <div class="form-row">
                    <div class="form-group full-width">
                      <label class="form-label">ğŸ‚ ìë…€ ìƒë…„ì›”ì¼</label>
                      <div class="birthday-inputs">
                        <%= f.select :child_birth_year, 
                                    options_for_select((2007..Date.current.year).map { |year| [year, year] }), 
                                    { prompt: "ë…„ë„" }, 
                                    { class: "form-select", id: "child_birth_year_field" } %>
                        <%= f.select :child_birth_month, 
                                    options_for_select((1..12).map { |month| ["#{month}ì›”", month] }), 
                                    { prompt: "ì›”" }, 
                                    { class: "form-select", id: "child_birth_month_field" } %>
                        <%= f.select :child_birth_day, 
                                    options_for_select((1..31).map { |day| ["#{day}ì¼", day] }), 
                                    { prompt: "ì¼" }, 
                                    { class: "form-select", id: "child_birth_day_field" } %>
                      </div>
                      <small class="form-text">ìƒì¼ ì´ë²¤íŠ¸ì™€ ì—°ë ¹ë³„ ë§ì¶¤ ì½˜í…ì¸  ì œê³µì— í™œìš©ë©ë‹ˆë‹¤.</small>
                    </div>
                  </div>
                  
                  <!-- ìë…€ í•™ë…„ ë° ê´€ì‹¬ì‚¬ -->
                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">ğŸ« í•™ë…„</label>
                      <%= f.select :child_grade, 
                                  options_for_select([
                                    ['ë¯¸ì·¨í•™', 'preschool'],
                                    ['ì´ˆë“± 1í•™ë…„', 'elementary_1'],
                                    ['ì´ˆë“± 2í•™ë…„', 'elementary_2'],
                                    ['ì´ˆë“± 3í•™ë…„', 'elementary_3'],
                                    ['ì´ˆë“± 4í•™ë…„', 'elementary_4'],
                                    ['ì´ˆë“± 5í•™ë…„', 'elementary_5'],
                                    ['ì´ˆë“± 6í•™ë…„', 'elementary_6'],
                                    ['ì¤‘ë“± 1í•™ë…„', 'middle_1'],
                                    ['ì¤‘ë“± 2í•™ë…„', 'middle_2'],
                                    ['ì¤‘ë“± 3í•™ë…„', 'middle_3'],
                                    ['ê³ ë“± 1í•™ë…„', 'high_1'],
                                    ['ê³ ë“± 2í•™ë…„', 'high_2'],
                                    ['ê³ ë“± 3í•™ë…„', 'high_3']
                                  ]), 
                                  { prompt: "í•™ë…„ì„ ì„ íƒí•´ì£¼ì„¸ìš”" },
                                  { class: "form-select", id: "child_grade_field" } %>
                    </div>
                    <div class="form-group">
                      <label class="form-label">ğŸ¨ ê´€ì‹¬ ë¶„ì•¼</label>
                      <%= f.select :child_interests, 
                                  options_for_select([
                                    ['ìˆ˜í•™/ê³¼í•™', 'math_science'],
                                    ['ì–¸ì–´/ë¬¸í•™', 'language_literature'],
                                    ['ì˜ˆìˆ /ìŒì•…', 'art_music'],
                                    ['ì²´ìœ¡/ìŠ¤í¬ì¸ ', 'sports'],
                                    ['ì½”ë”©/IT', 'coding_it'],
                                    ['ì—­ì‚¬/ì‚¬íšŒ', 'history_social'],
                                    ['ê¸°íƒ€', 'other']
                                  ]), 
                                  { prompt: "ê´€ì‹¬ ë¶„ì•¼ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”" },
                                  { class: "form-select", id: "child_interests_field" } %>
                    </div>
                  </div>
                </div>
              </div>

              <!-- ê³µí†µ ì •ë³´ -->
            <div class="mb-3">
                <label class="form-label fw-semibold">
                  <span id="name-label">ì´ë¦„</span>
                </label>
              <%= f.text_field :name, class: "form-control form-control-lg", 
                                id: "name-field", required: true %>
              <div class="invalid-feedback">
                ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.
              </div>
            </div>

            <div class="mb-3">
                <label class="form-label fw-semibold">
                  <span id="email-label">ì´ë©”ì¼</span>
                </label>
              <%= f.email_field :email, class: "form-control form-control-lg", 
                                  id: "email-field", required: true %>
              <div class="invalid-feedback">
                ì˜¬ë°”ë¥¸ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.
                </div>
                <div id="email-help" class="form-text"></div>
              </div>

              <!-- í‚¤ì¦ˆ ì „ìš©: ìƒë…„ì›”ì¼ -->
              <div id="birthdate-section" class="mb-3" style="display: none;">
                <label class="form-label fw-semibold">ìƒë…„ì›”ì¼</label>
                <div class="row g-2">
                  <div class="col-4">
                    <%= f.select :birth_year, 
                                options_for_select((2007..2021).map { |year| [year, year] }), 
                                { prompt: "ë…„ë„" }, 
                                { class: "form-select", id: "birth_year_field" } %>
                  </div>
                  <div class="col-4">
                    <%= f.select :birth_month, 
                                options_for_select((1..12).map { |month| [month, month] }), 
                                { prompt: "ì›”" }, 
                                { class: "form-select", id: "birth_month_field" } %>
                  </div>
                  <div class="col-4">
                    <%= f.select :birth_day, 
                                options_for_select((1..31).map { |day| [day, day] }), 
                                { prompt: "ì¼" }, 
                                { class: "form-select", id: "birth_day_field" } %>
                  </div>
                </div>
                <div class="form-text">ì•ˆì „í•œ ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.</div>
            </div>

            <div class="mb-3">
                <label class="form-label fw-semibold">ë¹„ë°€ë²ˆí˜¸</label>
              <%= f.password_field :password, class: "form-control form-control-lg", 
                                     id: "password-field", required: true, minlength: 6 %>
              <div class="invalid-feedback">
                ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.
                </div>
                <div id="password-help" class="form-text"></div>
            </div>

            <div class="mb-3">
                <label class="form-label fw-semibold">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
              <%= f.password_field :password_confirmation, class: "form-control form-control-lg", 
                                     id: "password-confirmation-field", required: true %>
              <div class="invalid-feedback">
                  ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                </div>
            </div>

              <!-- ì„±ì¸ ì „ìš©: ì—­í•  ì„ íƒ -->
              <div id="role-section" class="mb-3">
                <label class="form-label fw-semibold">ì—­í• </label>
              <%= f.select :role, 
                          options_for_select([
                              ['í•™ìŠµì', 'student'], 
                            ['ê°•ì‚¬', 'instructor']
                          ], @user.role), 
                          {}, 
                            { class: "form-select form-select-lg", id: "role-field" } %>
                <div id="role-help" class="form-text"></div>
              </div>

              <!-- ìê¸°ì†Œê°œ -->
              <div class="mb-4">
                <label class="form-label fw-semibold">
                  <span id="bio-label">ìê¸°ì†Œê°œ</span>
                  <span class="text-muted">(ì„ íƒì‚¬í•­)</span>
                </label>
                <%= f.text_area :bio, class: "form-control", rows: 3, 
                                id: "bio-field" %>
                <div id="bio-help" class="form-text"></div>
              </div>

              <!-- ì•½ê´€ ë™ì˜ -->
              <div id="terms-section" class="mb-4">
                <!-- ì„±ì¸ìš© ì•½ê´€ -->
                <div id="adult-terms" style="display: none;">
                  <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" id="adult-terms-check" required>
                    <label class="form-check-label" for="adult-terms-check">
                      <strong>ì´ìš©ì•½ê´€</strong>ì— ë™ì˜í•©ë‹ˆë‹¤. <a href="#" class="text-primary">ì „ë¬¸ ë³´ê¸°</a>
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="adult-privacy-check" required>
                    <label class="form-check-label" for="adult-privacy-check">
                      <strong>ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</strong>ì— ë™ì˜í•©ë‹ˆë‹¤. <a href="#" class="text-primary">ì „ë¬¸ ë³´ê¸°</a>
                    </label>
                  </div>
                </div>
                
                <!-- í‚¤ì¦ˆìš© ë¶€ëª¨ ë™ì˜ -->
                <div id="kids-consent" style="display: none;">
                  <div class="consent-section">
                    <div class="consent-header">
                      <h6><i class="bi bi-shield-check me-2"></i>ë¶€ëª¨ë‹˜ ë™ì˜</h6>
                      <p class="text-muted small">ë§Œ 14ì„¸ ë¯¸ë§Œ ì•„ë™ì˜ ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì„ ìœ„í•´ ë¶€ëª¨ë‹˜ì˜ ë™ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
                    </div>
                    
                    <div class="consent-items">
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="kids-terms-check" required>
                        <label class="form-check-label" for="kids-terms-check">
                          <div class="consent-item">
                            <strong>ì•„ë™ ì´ìš©ì•½ê´€</strong>ì— ë™ì˜í•©ë‹ˆë‹¤.
                            <div class="consent-details">
                              <small class="text-muted">â€¢ ì„œë¹„ìŠ¤ ì´ìš© ê·œì¹™ ë° ì œí•œì‚¬í•­</small><br>
                              <small class="text-muted">â€¢ ì½˜í…ì¸  ì´ìš© ê°€ì´ë“œë¼ì¸</small>
                            </div>
                            <a href="#" class="consent-link">ì „ë¬¸ ë³´ê¸°</a>
                          </div>
                        </label>
                      </div>
                      
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="kids-privacy-check" required>
                        <label class="form-check-label" for="kids-privacy-check">
                          <div class="consent-item">
                            <strong>ì•„ë™ ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©</strong>ì— ë™ì˜í•©ë‹ˆë‹¤.
                            <div class="consent-details">
                              <small class="text-muted">â€¢ ìˆ˜ì§‘í•­ëª©: ì´ë¦„, ìƒë…„ì›”ì¼, í•™ë…„, ê´€ì‹¬ë¶„ì•¼</small><br>
                              <small class="text-muted">â€¢ ì´ìš©ëª©ì : ë§ì¶¤ ì½˜í…ì¸  ì œê³µ, í•™ìŠµ ê´€ë¦¬</small><br>
                              <small class="text-muted">â€¢ ë³´ìœ ê¸°ê°„: íšŒì›íƒˆí‡´ ì‹œê¹Œì§€</small>
                            </div>
                            <a href="#" class="consent-link">ì „ë¬¸ ë³´ê¸°</a>
                          </div>
                        </label>
                      </div>
                      
                      <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="parent-info-consent-check" required>
                        <label class="form-check-label" for="parent-info-consent-check">
                          <div class="consent-item">
                            <strong>ë¶€ëª¨ë‹˜ ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©</strong>ì— ë™ì˜í•©ë‹ˆë‹¤.
                            <div class="consent-details">
                              <small class="text-muted">â€¢ ìˆ˜ì§‘í•­ëª©: ì´ë¦„, ì´ë©”ì¼, ì—°ë½ì²˜, ìƒë…„ì›”ì¼</small><br>
                              <small class="text-muted">â€¢ ì´ìš©ëª©ì : ìë…€ ê³„ì • ê´€ë¦¬, í•™ìŠµ í˜„í™© ì•ˆë‚´</small><br>
                              <small class="text-muted">â€¢ ë³´ìœ ê¸°ê°„: ìë…€ íšŒì›íƒˆí‡´ ì‹œê¹Œì§€</small>
                            </div>
                            <a href="#" class="consent-link">ì „ë¬¸ ë³´ê¸°</a>
                          </div>
                        </label>
                      </div>
                      
                      <!-- ì„ íƒì  ë™ì˜ -->
                      <div class="optional-consent">
                        <h6 class="text-muted">ì„ íƒì  ë™ì˜ (ê±°ë¶€ ì‹œì—ë„ ì„œë¹„ìŠ¤ ì´ìš© ê°€ëŠ¥)</h6>
                        
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="checkbox" id="marketing-consent-check">
                          <label class="form-check-label" for="marketing-consent-check">
                            <div class="consent-item">
                              <strong>ë§ˆì¼€íŒ… ì •ë³´ ìˆ˜ì‹ </strong>ì— ë™ì˜í•©ë‹ˆë‹¤.
                              <div class="consent-details">
                                <small class="text-muted">â€¢ ìƒì¼ ì¶•í•˜ ë©”ì‹œì§€ ë° ì´ë²¤íŠ¸ ì•ˆë‚´</small><br>
                                <small class="text-muted">â€¢ ë§ì¶¤í˜• ê°•ì˜ ë° ë„ì„œ ì¶”ì²œ</small><br>
                                <small class="text-muted">â€¢ êµìœ¡ ê´€ë ¨ ìœ ìš©í•œ ì •ë³´ ì œê³µ</small>
                              </div>
                            </div>
                          </label>
                        </div>
                        
                        <div class="form-check mb-2">
                          <input class="form-check-input" type="checkbox" id="third-party-consent-check">
                          <label class="form-check-label" for="third-party-consent-check">
                            <div class="consent-item">
                              <strong>ì œ3ì ì œê³µ</strong>ì— ë™ì˜í•©ë‹ˆë‹¤.
                              <div class="consent-details">
                                <small class="text-muted">â€¢ ì œê³µë°›ëŠ” ì: êµìœ¡ ì½˜í…ì¸  ì œê³µì—…ì²´</small><br>
                                <small class="text-muted">â€¢ ì œê³µ ëª©ì : ë§ì¶¤í˜• êµìœ¡ ì„œë¹„ìŠ¤ ì œê³µ</small><br>
                                <small class="text-muted">â€¢ ì œê³µ í•­ëª©: ì—°ë ¹, í•™ë…„, ê´€ì‹¬ë¶„ì•¼</small>
                              </div>
                            </div>
                          </label>
                        </div>
              </div>
            </div>

                    <!-- ë¶€ëª¨ í™•ì¸ -->
                    <div class="parent-verification">
                      <div class="alert alert-warning" role="alert">
                        <h6><i class="bi bi-exclamation-triangle me-2"></i>ë¶€ëª¨ë‹˜ í™•ì¸</h6>
                        <p class="mb-2">ìœ„ ë‚´ìš©ì„ ì¶©ë¶„íˆ ì½ê³  ì´í•´í–ˆìœ¼ë©°, ìë…€ì˜ íšŒì›ê°€ì…ì— ë™ì˜í•©ë‹ˆë‹¤.</p>
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" id="parent-verification-check" required>
                          <label class="form-check-label" for="parent-verification-check">
                            <strong>ë³¸ì¸ì€ ìœ„ ì•„ë™ì˜ ë²•ì •ëŒ€ë¦¬ì¸ìœ¼ë¡œì„œ ê°œì¸ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</strong>
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="invalid-feedback">
                  í•„ìˆ˜ ì•½ê´€ì— ëª¨ë‘ ë™ì˜í•´ì£¼ì„¸ìš”.
                </div>
            </div>

            <div class="d-grid mb-4">
                <%= f.submit "íšŒì›ê°€ì…", class: "btn btn-lg", id: "submit-btn" %>
            </div>
          <% end %>

      <!-- ë¡œê·¸ì¸ ë§í¬ -->
      <div class="login-link">
        <span>ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?</span>
        <%= link_to "ë¡œê·¸ì¸", login_path %>
      </div>
    </div>
  </div>
</div>

<style>
/* í˜„ëŒ€ì  í•œêµ­ ì›¹ì‚¬ì´íŠ¸ ìŠ¤íƒ€ì¼ - ë¯¸ë‹ˆë©€ ë””ìì¸ */

/* ì „ì²´ ì»¨í…Œì´ë„ˆ */
.modern-signup-container {
  min-height: 100vh;
  background: #fafafa;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
}

/* ì—°ë ¹ëŒ€ ì„ íƒ ë˜í¼ */
.age-selection-wrapper {
  max-width: 480px;
  width: 100%;
  background: white;
  border-radius: 12px;
  padding: 40px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

/* ë¸Œëœë“œ ë¡œê³  */
.brand-logo {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 32px;
  color: #333;
}

.brand-logo i {
  font-size: 2rem;
  margin-right: 8px;
  color: #4f46e5;
}

.brand-logo span {
  font-size: 1.5rem;
  font-weight: 700;
  color: #111;
}

/* íšŒì›ê°€ì… í—¤ë” */
.signup-header {
  text-align: center;
  margin-bottom: 40px;
}

.signup-title {
  font-size: 1.75rem;
  font-weight: 700;
  color: #111;
  margin-bottom: 8px;
}

.signup-subtitle {
  font-size: 1rem;
  color: #6b7280;
  margin: 0;
}

/* ì—°ë ¹ëŒ€ ì˜µì…˜ë“¤ */
.age-options {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.age-option {
  display: flex;
  align-items: center;
  padding: 20px;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  background: white;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.age-option:hover {
  border-color: #4f46e5;
  background: #f8faff;
}

.age-option.selected {
  border-color: #4f46e5;
  background: #f0f9ff;
}

/* ì˜µì…˜ ì•„ì´ì½˜ */
.option-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: #f3f4f6;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 16px;
  flex-shrink: 0;
}

.adult-option .option-icon {
  background: #eff6ff;
  color: #3b82f6;
}

.kids-option .option-icon {
  background: #fef3c7;
  color: #f59e0b;
}

.option-icon i {
  font-size: 1.5rem;
}

/* ì˜µì…˜ ì½˜í…ì¸  */
.option-content {
  flex: 1;
}

.option-content h3 {
  font-size: 1.125rem;
  font-weight: 600;
  color: #111;
  margin: 0 0 4px 0;
}

.option-content p {
  font-size: 0.875rem;
  color: #6b7280;
  margin: 0 0 8px 0;
}

.option-features {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.option-features span {
  font-size: 0.75rem;
  padding: 2px 8px;
  background: #f3f4f6;
  color: #6b7280;
  border-radius: 12px;
}

.adult-option .option-features span {
  background: #dbeafe;
  color: #1d4ed8;
}

.kids-option .option-features span {
  background: #fef3c7;
  color: #92400e;
}

/* ì˜µì…˜ í™”ì‚´í‘œ */
.option-arrow {
  color: #9ca3af;
  margin-left: 16px;
}

.age-option:hover .option-arrow {
  color: #4f46e5;
  transform: translateX(4px);
}

/* íšŒì›ê°€ì… í¼ ë˜í¼ */
.signup-form-wrapper {
  max-width: 480px;
  width: 100%;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  animation: slideIn 0.3s ease;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* í¼ ì»¨í…Œì´ë„ˆ */
.form-container {
  padding: 40px;
}

/* í¼ í—¤ë” */
.form-header {
  display: flex;
  align-items: center;
  margin-bottom: 32px;
  padding-bottom: 20px;
  border-bottom: 1px solid #e5e7eb;
}

.back-button {
  background: none;
  border: none;
  color: #6b7280;
  font-size: 1.25rem;
  cursor: pointer;
  padding: 8px;
  border-radius: 8px;
  transition: all 0.2s ease;
  margin-right: 16px;
}

.back-button:hover {
  background: #f3f4f6;
  color: #374151;
}

.age-indicator {
  font-size: 1rem;
  font-weight: 600;
  color: #111;
}

/* í¼ ìŠ¤íƒ€ì¼ */
.form-label {
  font-weight: 600 !important;
  color: #374151 !important;
  margin-bottom: 8px !important;
}

.form-control, .form-select {
  border: 2px solid #e5e7eb !important;
  border-radius: 8px !important;
  padding: 12px 16px !important;
  font-size: 1rem !important;
  transition: border-color 0.2s ease !important;
}

.form-control:focus, .form-select:focus {
  border-color: #4f46e5 !important;
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1) !important;
}

/* ì œì¶œ ë²„íŠ¼ */
#submit-btn {
  background: #4f46e5 !important;
  border: none !important;
  border-radius: 8px !important;
  padding: 14px !important;
  font-weight: 600 !important;
  font-size: 1rem !important;
  transition: background 0.2s ease !important;
}

#submit-btn:hover {
  background: #4338ca !important;
}

/* í‚¤ì¦ˆ í…Œë§ˆ */
.kids-theme #submit-btn {
  background: #f59e0b !important;
}

.kids-theme #submit-btn:hover {
  background: #d97706 !important;
}

/* ë¡œê·¸ì¸ ë§í¬ */
.login-link {
  text-align: center;
  margin-top: 32px;
  padding-top: 20px;
  border-top: 1px solid #e5e7eb;
  color: #6b7280;
}

.login-link a {
  color: #4f46e5;
  text-decoration: none;
  font-weight: 600;
  margin-left: 4px;
}

.login-link a:hover {
  text-decoration: underline;
}

/* ì•Œë¦¼ ìŠ¤íƒ€ì¼ */
.alert-info {
  background: #f0f9ff !important;
  border: 1px solid #bae6fd !important;
  color: #0c4a6e !important;
  border-radius: 8px !important;
}

/* ë°˜ì‘í˜• */
@media (max-width: 640px) {
  .modern-signup-container {
    padding: 16px;
  }
  
  .age-selection-wrapper,
  .form-container {
    padding: 24px;
  }
  
  .signup-title {
    font-size: 1.5rem;
  }
  
  .age-option {
    padding: 16px;
  }
  
  .option-content h3 {
    font-size: 1rem;
  }
}

/* ë¶€ëª¨ë‹˜ ë™ì˜ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
.consent-section {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 24px;
  margin-top: 20px;
}

.consent-header {
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid #e9ecef;
}

.consent-header h6 {
  color: #495057;
  margin-bottom: 8px;
}

.consent-items .form-check {
  background: white;
  border-radius: 8px;
  padding: 16px;
  border: 1px solid #e9ecef;
  transition: all 0.2s ease;
}

.consent-items .form-check:hover {
  border-color: #4f46e5;
  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.1);
}

.consent-item {
  margin-left: 8px;
}

.consent-details {
  margin: 8px 0;
  padding-left: 12px;
  border-left: 3px solid #e9ecef;
}

.consent-link {
  font-size: 0.875rem;
  color: #4f46e5;
  text-decoration: none;
  font-weight: 500;
}

.consent-link:hover {
  text-decoration: underline;
}

.optional-consent {
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid #e9ecef;
}

.optional-consent h6 {
  font-size: 0.9rem;
  margin-bottom: 16px;
}

.parent-verification {
  margin-top: 24px;
}

.parent-verification .alert {
  border-left: 4px solid #ffc107;
}

.parent-verification .form-check {
  background: rgba(255, 193, 7, 0.1);
  border-radius: 8px;
  padding: 12px;
  margin-top: 12px;
}

/* í¼ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ */
.form-grid {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.form-row .form-group.full-width {
  grid-column: 1 / -1;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  margin-bottom: 8px;
  font-weight: 600;
  color: #374151;
}

.info-section-header {
  margin-bottom: 20px;
  padding: 16px;
  background: #f8f9fa;
  border-radius: 8px;
  border-left: 4px solid #4f46e5;
}

.info-section-header h5 {
  color: #374151;
  margin-bottom: 8px;
}

.birthday-inputs {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 12px;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .form-row {
    grid-template-columns: 1fr;
  }
  
  .birthday-inputs {
    grid-template-columns: 2fr 1fr 1fr;
  }
  
  .consent-section {
    padding: 16px;
  }
  
  .consent-items .form-check {
    padding: 12px;
  }
}

/* ë””ë²„ê·¸ íŒ¨ë„ ìˆ¨ê¹€ */
#debug-panel {
  display: none;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('ğŸš€ íšŒì›ê°€ì… í˜ì´ì§€ JavaScript ë¡œë“œë¨');
  let selectedAge = null;
  
  // ë””ë²„ê¹…: DOM ìš”ì†Œ í™•ì¸
  const ageOptions = document.querySelectorAll('.age-option');
  const backButton = document.getElementById('back-to-selection');
  const ageSection = document.getElementById('age-selection-section');
  const formSection = document.getElementById('signup-form-section');
  
  console.log('ğŸ“‹ DOM ìš”ì†Œ í™•ì¸:', {
    ageOptions: ageOptions.length,
    backButton: !!backButton,
    ageSection: !!ageSection,
    formSection: !!formSection
  });
  
  // ì—°ë ¹ëŒ€ ì„ íƒ ì´ë²¤íŠ¸
  document.querySelectorAll('.age-option').forEach(option => {
    console.log('ğŸ¯ ì˜µì…˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€:', option.dataset.age);
    
    // ì˜µì…˜ í´ë¦­ ì´ë²¤íŠ¸
    option.addEventListener('click', function(e) {
      console.log('ğŸ–±ï¸ ì˜µì…˜ í´ë¦­ë¨:', this.dataset.age);
      
      // ì„ íƒ ìƒíƒœ í‘œì‹œ
      document.querySelectorAll('.age-option').forEach(opt => opt.classList.remove('selected'));
      this.classList.add('selected');
      
      selectedAge = this.dataset.age;
      
      // ì•½ê°„ì˜ ì§€ì—° í›„ í¼ í‘œì‹œ (ì„ íƒ í”¼ë“œë°±ì„ ìœ„í•´)
      setTimeout(() => {
        showSignupForm(selectedAge);
      }, 200);
    });
  });
  
  // ë’¤ë¡œê°€ê¸° ë²„íŠ¼
  const backToSelectionBtn = document.getElementById('back-to-selection');
  if (backToSelectionBtn) {
    backToSelectionBtn.addEventListener('click', function() {
      console.log('â¬…ï¸ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ í´ë¦­ë¨');
      showAgeSelection();
    });
  }
  
  // ì—°ë ¹ëŒ€ ì„ íƒ í™”ë©´ í‘œì‹œ
  function showAgeSelection() {
    console.log('ğŸ“„ ì—°ë ¹ëŒ€ ì„ íƒ í™”ë©´ í‘œì‹œ');
    const ageSection = document.getElementById('age-selection-section');
    const formSection = document.getElementById('signup-form-section');
    
    if (ageSection) ageSection.style.display = 'block';
    if (formSection) formSection.style.display = 'none';
    document.body.className = '';
  }
  
  // íšŒì›ê°€ì… í¼ í‘œì‹œ
  function showSignupForm(ageCategory) {
    console.log('ğŸ“ íšŒì›ê°€ì… í¼ í‘œì‹œ:', ageCategory);
    
    const ageSection = document.getElementById('age-selection-section');
    const formSection = document.getElementById('signup-form-section');
    
    if (ageSection) {
      ageSection.style.display = 'none';
    } else {
      console.error('âŒ age-selection-sectionì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }
    
    if (formSection) {
      formSection.style.display = 'block';
    } else {
      console.error('âŒ signup-form-sectionì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
      return;
    }
    
    // ì—°ë ¹ëŒ€ë³„ í…Œë§ˆ ì ìš©
    document.body.className = ageCategory + '-theme';
    console.log('ğŸ¨ í…Œë§ˆ ì ìš©:', ageCategory + '-theme');
    
    // ì„ íƒëœ ì—°ë ¹ëŒ€ í‘œì‹œ
    const indicator = document.getElementById('selected-age-indicator');
    if (indicator) {
      if (ageCategory === 'adult') {
        indicator.innerHTML = `
          <span><i class="bi bi-person-badge me-2"></i>ì„±ì¸ íšŒì›ê°€ì…</span>
        `;
      } else {
        indicator.innerHTML = `
          <span><i class="bi bi-emoji-smile me-2"></i>í‚¤ì¦ˆ íšŒì›ê°€ì…</span>
        `;
      }
    } else {
      console.error('âŒ selected-age-indicatorë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }
    
    // ìˆ¨ê²¨ì§„ í•„ë“œì— ì—°ë ¹ëŒ€ ì„¤ì •
    const ageCategoryField = document.getElementById('age_category_field');
    if (ageCategoryField) {
      ageCategoryField.value = ageCategory;
      console.log('âœ… ì—°ë ¹ëŒ€ í•„ë“œ ì„¤ì •:', ageCategory);
    } else {
      console.error('âŒ age_category_fieldë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }
    
    // ì—°ë ¹ëŒ€ë³„ í¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•
    try {
      customizeFormForAge(ageCategory);
      console.log('âœ… í¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì™„ë£Œ');
    } catch (error) {
      console.error('âŒ í¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜¤ë¥˜:', error);
    }
  }
  
  // ì—°ë ¹ëŒ€ë³„ í¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•
  function customizeFormForAge(ageCategory) {
    console.log('ğŸ”§ í¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì‹œì‘:', ageCategory);
    
    // DOM ìš”ì†Œ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜¤ê¸°
    const parentInfoSection = document.getElementById('parent-info-section');
    const birthdateSection = document.getElementById('birthdate-section');
    const roleSection = document.getElementById('role-section');
    
    if (ageCategory === 'adult') {
      console.log('ğŸ‘¨â€ğŸ’¼ ì„±ì¸ í¼ ì„¤ì •');
      // ì„±ì¸ í¼ ì„¤ì •
      if (parentInfoSection) parentInfoSection.style.display = 'none';
      if (birthdateSection) birthdateSection.style.display = 'none';
      if (roleSection) roleSection.style.display = 'block';
      
      // ìë…€ ì •ë³´ ì„¹ì…˜ ìˆ¨ê¹€
      const childInfoSection = document.getElementById('child-info-section');
      if (childInfoSection) childInfoSection.style.display = 'none';
      
      // ì„±ì¸ ë™ì˜ ì„¹ì…˜ í‘œì‹œ
      const adultTerms = document.getElementById('adult-terms');
      const kidsConsent = document.getElementById('kids-consent');
      if (adultTerms) adultTerms.style.display = 'block';
      if (kidsConsent) kidsConsent.style.display = 'none';
      
      // ë¼ë²¨ ë° í”Œë ˆì´ìŠ¤í™€ë” ì„¤ì • (ì•ˆì „í•˜ê²Œ)
      const nameLabel = document.getElementById('name-label');
      const emailLabel = document.getElementById('email-label');
      const nameField = document.getElementById('name-field');
      const emailField = document.getElementById('email-field');
      const passwordField = document.getElementById('password-field');
      const passwordConfirmationField = document.getElementById('password-confirmation-field');
      const bioLabel = document.getElementById('bio-label');
      const bioField = document.getElementById('bio-field');
      
      if (nameLabel) nameLabel.textContent = 'ì´ë¦„';
      if (emailLabel) emailLabel.textContent = 'ì´ë©”ì¼';
      if (nameField) nameField.placeholder = 'ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”';
      if (emailField) emailField.placeholder = 'ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”';
      if (passwordField) passwordField.placeholder = 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”';
      if (passwordConfirmationField) passwordConfirmationField.placeholder = 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”';
      if (bioLabel) bioLabel.textContent = 'ìê¸°ì†Œê°œ';
      if (bioField) bioField.placeholder = 'ê°„ë‹¨í•œ ìê¸°ì†Œê°œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”';
      
      // ë„ì›€ë§ í…ìŠ¤íŠ¸ (ì•ˆì „í•˜ê²Œ)
      const emailHelp = document.getElementById('email-help');
      const passwordHelp = document.getElementById('password-help');
      const roleHelp = document.getElementById('role-help');
      const bioHelp = document.getElementById('bio-help');
      const termsText = document.getElementById('terms-text');
      
      if (emailHelp) emailHelp.textContent = 'ê°•ì˜ ì•Œë¦¼ê³¼ ì¤‘ìš” ê³µì§€ë¥¼ ë°›ì„ ì´ë©”ì¼ì…ë‹ˆë‹¤.';
      if (passwordHelp) passwordHelp.textContent = 'ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš” (ìµœì†Œ 6ì).';
      if (roleHelp) roleHelp.innerHTML = '<strong>í•™ìŠµì:</strong> ê°•ì˜ ìˆ˜ê°• ë° ë„ì„œ ëŒ€ì—¬ &nbsp; <strong>ê°•ì‚¬:</strong> ê°•ì˜ ì œì‘ ë° íŒë§¤';
      if (bioHelp) bioHelp.textContent = 'ì „ë¬¸ ë¶„ì•¼ë‚˜ ê´€ì‹¬ì‚¬ë¥¼ ê°„ë‹¨íˆ ì†Œê°œí•´ì£¼ì„¸ìš”.';
      if (termsText) termsText.textContent = 'ì„±ì¸ ì´ìš©ì•½ê´€ ë° ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨';
      
    } else {
      console.log('ğŸ‘¶ í‚¤ì¦ˆ í¼ ì„¤ì •');
      // í‚¤ì¦ˆ í¼ ì„¤ì •
      if (parentInfoSection) parentInfoSection.style.display = 'block';
      if (birthdateSection) birthdateSection.style.display = 'block';
      if (roleSection) roleSection.style.display = 'none';
      
      // ìë…€ ì •ë³´ ì„¹ì…˜ í‘œì‹œ
      const childInfoSection = document.getElementById('child-info-section');
      if (childInfoSection) childInfoSection.style.display = 'block';
      
      // í‚¤ì¦ˆ ë™ì˜ ì„¹ì…˜ í‘œì‹œ
      const adultTerms = document.getElementById('adult-terms');
      const kidsConsent = document.getElementById('kids-consent');
      if (adultTerms) adultTerms.style.display = 'none';
      if (kidsConsent) kidsConsent.style.display = 'block';
      
      // ë¼ë²¨ ë° í”Œë ˆì´ìŠ¤í™€ë” ì„¤ì • (ì•ˆì „í•˜ê²Œ)
      const nameLabel = document.getElementById('name-label');
      const emailLabel = document.getElementById('email-label');
      const nameField = document.getElementById('name-field');
      const emailField = document.getElementById('email-field');
      const passwordField = document.getElementById('password-field');
      const passwordConfirmationField = document.getElementById('password-confirmation-field');
      const bioLabel = document.getElementById('bio-label');
      const bioField = document.getElementById('bio-field');
      
      if (nameLabel) nameLabel.textContent = 'ê³„ì • ì•„ì´ë””';
      if (emailLabel) emailLabel.textContent = 'ê³„ì • ì´ë©”ì¼';
      if (nameField) nameField.placeholder = 'ìë…€ê°€ ì‚¬ìš©í•  ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”';
      if (emailField) emailField.placeholder = 'ê³„ì •ìš© ì´ë©”ì¼ ì£¼ì†Œ';
      if (passwordField) passwordField.placeholder = 'ìë…€ê°€ ê¸°ì–µí•  ìˆ˜ ìˆëŠ” ë¹„ë°€ë²ˆí˜¸';
      if (passwordConfirmationField) passwordConfirmationField.placeholder = 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”';
      if (bioLabel) bioLabel.textContent = 'ìë…€ ì†Œê°œ';
      if (bioField) bioField.placeholder = 'ìë…€ì— ëŒ€í•œ ê°„ë‹¨í•œ ì†Œê°œë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”';
      
      // ë„ì›€ë§ í…ìŠ¤íŠ¸ (ì•ˆì „í•˜ê²Œ)
      const emailHelp = document.getElementById('email-help');
      const passwordHelp = document.getElementById('password-help');
      const bioHelp = document.getElementById('bio-help');
      
      if (emailHelp) emailHelp.textContent = 'ìë…€ì˜ í•™ìŠµ í˜„í™©ê³¼ ì•Œë¦¼ì„ ë°›ì„ ì´ë©”ì¼ì…ë‹ˆë‹¤.';
      if (passwordHelp) passwordHelp.textContent = 'ìë…€ê°€ ì‰½ê²Œ ê¸°ì–µí•  ìˆ˜ ìˆëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”.';
      if (bioHelp) bioHelp.textContent = 'ìë…€ì˜ íŠ¹ì„±ì´ë‚˜ í•™ìŠµ ëª©í‘œë¥¼ ê°„ë‹¨íˆ ì ì–´ì£¼ì„¸ìš”.';
      
      // ë¶€ëª¨ ì •ë³´ í•„ìˆ˜ ì„¤ì • (ì•ˆì „í•˜ê²Œ)
      const parentNameField = document.getElementById('parent_name_field');
      const parentEmailField = document.getElementById('parent_email_field');
      const parentPhoneField = document.getElementById('parent_phone_field');
      const parentBirthdayField = document.getElementById('parent_birthday_field');
      const parentRelationshipField = document.getElementById('parent_relationship_field');
      
      // ìë…€ ì •ë³´ í•„ìˆ˜ ì„¤ì •
      const childNameField = document.getElementById('child_name_field');
      const childGenderField = document.getElementById('child_gender_field');
      const childBirthYearField = document.getElementById('child_birth_year_field');
      const childBirthMonthField = document.getElementById('child_birth_month_field');
      const childBirthDayField = document.getElementById('child_birth_day_field');
      const childGradeField = document.getElementById('child_grade_field');
      
      // í•„ìˆ˜ í•„ë“œ ì„¤ì •
      if (parentNameField) parentNameField.required = true;
      if (parentEmailField) parentEmailField.required = true;
      if (parentPhoneField) parentPhoneField.required = true;
      if (parentBirthdayField) parentBirthdayField.required = true;
      if (parentRelationshipField) parentRelationshipField.required = true;
      
      if (childNameField) childNameField.required = true;
      if (childGenderField) childGenderField.required = true;
      if (childBirthYearField) childBirthYearField.required = true;
      if (childBirthMonthField) childBirthMonthField.required = true;
      if (childBirthDayField) childBirthDayField.required = true;
      if (childGradeField) childGradeField.required = true;
    }
  }
  
// Bootstrap í¼ ê²€ì¦
(function() {
  'use strict';
  window.addEventListener('load', function() {
    var forms = document.getElementsByClassName('needs-validation');
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();

  // ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ê²€ì¦ (ì•ˆì „í•˜ê²Œ)
  function setupPasswordValidation() {
    const passwordField = document.getElementById('password-field');
    const passwordConfirmationField = document.getElementById('password-confirmation-field');
  
  function validatePassword() {
      if (passwordField && passwordConfirmationField) {
        if (passwordField.value !== passwordConfirmationField.value) {
          passwordConfirmationField.setCustomValidity('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        } else {
          passwordConfirmationField.setCustomValidity('');
        }
      }
    }
    
    if (passwordField && passwordConfirmationField) {
      console.log('âœ… ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ì„¤ì • ì™„ë£Œ');
      passwordField.addEventListener('change', validatePassword);
      passwordConfirmationField.addEventListener('keyup', validatePassword);
    } else {
      console.log('âš ï¸ ë¹„ë°€ë²ˆí˜¸ í•„ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
    }
  }
  
  // ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ì´ˆê¸°í™”
  setupPasswordValidation();
  
  console.log('âœ… ëª¨ë“  JavaScript ì´ˆê¸°í™” ì™„ë£Œ');
});
</script>
