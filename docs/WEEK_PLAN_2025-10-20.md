# 📅 이번 주 작업 계획 (3일) - 2025년 10월 20일

## 🎯 목표: SEO 기본 설정 + 도메인 준비

---

## 📋 Day 1: Google Analytics 설정 (오늘)

### ✅ 자동 준비 완료
- [x] GA4 추적 코드 레이아웃에 추가 (환경변수 방식)
- [x] robots.txt 확인 (이미 완성됨)
- [x] sitemap.xml 확인 (이미 생성됨)

### 👤 사용자님이 직접 하실 것 (30분)

#### 1. Google Analytics 4 계정 생성
```
1. https://analytics.google.com 접속
2. "측정 시작" 클릭
3. 계정 이름: "정화의서재"
4. 속성 이름: "정화의서재 웹사이트"
5. 비즈니스 정보:
   - 산업: 교육
   - 비즈니스 규모: 소규모
   - 용도: 판매 및 잠재고객 참여
6. "데이터 스트림" 생성:
   - 플랫폼: 웹
   - 웹사이트 URL: https://jeonghwa.kr (또는 임시 localhost:3000)
   - 스트림 이름: 정화의서재
7. "측정 ID" 복사
   예: G-XXXXXXXXXX
```

#### 2. 환경변수 설정
```bash
# 개발 환경
echo 'export GOOGLE_ANALYTICS_ID="G-XXXXXXXXXX"' >> ~/.zshrc
source ~/.zshrc

# 또는 .env 파일에 추가 (나중에 프로덕션 배포 시)
# GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
```

#### 3. 서버 재시작 및 확인
```bash
cd /Users/l2dogyu/KICDA/ruby/kicda-jh
rails s

# 브라우저: http://localhost:3000
# 개발자도구 → Network → gtag/js 확인
```

---

## 📋 Day 2: Google Search Console + Sitemap (내일)

### 👤 사용자님이 직접 하실 것 (30분)

#### 1. Search Console 등록
```
1. https://search.google.com/search-console 접속
2. "속성 추가" → "URL 접두어"
3. URL: https://jeonghwa.kr
4. 소유권 확인:
   A안) HTML 파일 업로드
   B안) HTML 태그 (권장)
   C안) Google Analytics (이미 설치됨!)
   
5. "Google Analytics" 선택 → 자동 확인 ✅
```

#### 2. Sitemap 제출
```
1. Search Console → Sitemaps
2. 새 사이트맵 추가:
   https://jeonghwa.kr/sitemap.xml.gz
3. 제출 클릭
4. 상태: "성공" 확인 (24시간 내)
```

#### 3. robots.txt 업데이트
```bash
# 프로덕션 배포 후
# public/robots.txt 파일 수정
Sitemap: https://jeonghwa.kr/sitemap.xml.gz
# (현재는 localhost로 되어 있음)
```

---

## 📋 Day 3: 가비아 도메인 구매 + Cloudflare (모레)

### 👤 사용자님이 직접 하실 것 (60분)

#### 1. 가비아 도메인 구매 (30분)
```
1. https://www.gabia.com 접속
2. 회원가입/로그인
3. 도메인 검색:
   - jeonghwa.kr (추천)
   - 정화의서재.kr
   
4. 가격 확인:
   - .kr: ₩18,000/년
   - .co.kr: ₩20,000/년 (사업자 필요)
   
5. 구매 및 결제
6. 등록 정보 입력:
   - 상호: 정화의서재
   - 사업자번호: 869-30-01778
   - 주소: 인천광역시 부평구 마장로 264번길 33
```

#### 2. Cloudflare 무료 플랜 설정 (20분)
```
📖 가이드: docs/GABIA_CLOUDFLARE_SETUP.md 참고

1. https://dash.cloudflare.com 회원가입
2. "Add a Site" → jeonghwa.kr
3. 플랜: Free $0/month 선택
4. Cloudflare 네임서버 확인:
   예: bob.ns.cloudflare.com
       dee.ns.cloudflare.com
5. 가비아에서 네임서버 변경:
   마이페이지 → 도메인 관리 → 네임서버 변경
6. DNS 전파 대기 (10-30분)
```

#### 3. Cloudflare API Token 생성 (10분)
```
1. Profile → API Tokens
2. Create Token → "Edit zone DNS" 템플릿
3. Zone: jeonghwa.kr
4. 토큰 복사 및 저장:
   
   📌 CLOUDFLARE_API_TOKEN=xxxxxxxxxxxxx
   📌 CLOUDFLARE_ZONE_ID=xxxxxxxxxxxxx
```

---

## 🔍 검증 방법

### Google Analytics 작동 확인
```bash
# 브라우저 개발자도구 → Console
gtag('event', 'test_event', {
  'event_category': 'test',
  'event_label': 'manual_test'
});

# Google Analytics → 보고서 → 실시간 → 확인
```

### Search Console 색인 확인
```
1. Search Console → URL 검사
2. URL 입력: https://jeonghwa.kr
3. "Google에 색인 생성 요청"
4. 7-14일 후 검색 노출 시작
```

### 도메인 연결 확인
```bash
# DNS 전파 확인
nslookup jeonghwa.kr

# HTTPS 확인
curl -I https://jeonghwa.kr

# 예상 결과:
# HTTP/2 200
# server: cloudflare
```

---

## 💰 예상 비용

```
가비아 도메인 (.kr):
  ₩18,000/년 = ₩1,500/월

Cloudflare (Free):
  DNS: 무료
  CDN: 무료
  SSL: 무료
  DDoS 보호: 무료

Google Analytics: 무료
Google Search Console: 무료

총 비용: ₩18,000/년 (₩1,500/월)
```

---

## 📊 완료 체크리스트

### Day 1 ✅
- [ ] Google Analytics 계정 생성
- [ ] 측정 ID 환경변수 설정
- [ ] 실시간 보고서에서 데이터 확인
- [ ] GA4 이벤트 테스트

### Day 2
- [ ] Search Console 속성 추가
- [ ] GA로 소유권 확인
- [ ] Sitemap 제출
- [ ] robots.txt 프로덕션 URL 수정

### Day 3
- [ ] 가비아 도메인 구매
- [ ] Cloudflare 계정 생성
- [ ] 네임서버 변경
- [ ] DNS 전파 확인 (24시간 이내)
- [ ] API Token 발급 및 저장

---

## 🎯 성공 기준

### Google Analytics
- ✅ 실시간 사용자 트래킹 작동
- ✅ 페이지뷰 기록됨
- ✅ 이벤트 추적 가능

### Search Console
- ✅ 소유권 확인됨
- ✅ Sitemap 제출 완료
- ✅ 색인 생성 요청 완료

### 도메인 + Cloudflare
- ✅ 도메인 구매 완료
- ✅ DNS Active 상태
- ✅ HTTPS 작동
- ✅ API Token 발급

---

## 🚨 주의사항

### Google Analytics
- **개인정보 보호**: `anonymize_ip: true` 설정됨 ✅
- **GDPR 준수**: 필요 시 쿠키 동의 배너 추가
- **테스트 데이터**: 개발 환경에서 과도한 테스트 자제

### Search Console
- **색인 시간**: 7-14일 소요
- **sitemap 업데이트**: 매일 자동 생성 (sitemap_generator)
- **크롤링 오류**: 정기 확인 필요

### 도메인 + Cloudflare
- **네임서버 전파**: 최대 24시간 (보통 30분)
- **Proxy Status**: "DNS only" (회색 구름) 필수!
- **SSL**: GCP Cloud Run 자동 발급 (Cloudflare와 별도)

---

## 📞 도움이 필요하면

### 문서
- `docs/GABIA_CLOUDFLARE_SETUP.md` - 도메인 설정 완벽 가이드
- `docs/GCP_COMPLETE_GUIDE.md` - GCP 배포 가이드
- `docs/FINAL_HANDOVER_2025-10-19.md` - 전체 인수인계 문서

### 검증 명령어
```bash
# 서버 상태
curl http://localhost:3000

# 환경변수 확인
echo $GOOGLE_ANALYTICS_ID

# DNS 확인
nslookup jeonghwa.kr

# Sitemap 확인
curl http://localhost:3000/sitemap.xml.gz -I
```

---

**작성일**: 2025년 10월 20일  
**예상 소요**: 3일 (각 1-2시간)  
**난이도**: 중간 (대부분 UI 클릭)

**화이팅! 🚀**


